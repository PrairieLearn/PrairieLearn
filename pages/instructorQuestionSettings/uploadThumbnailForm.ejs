<form name="upload-thumbnail-form" class="needs-validation" method="POST" enctype="multipart/form-data" novalidate>
    <div class="container p-0 mb-4">
        Upload an image of type <code class="user-output">jpg</code>, <code class="user-output">jpeg</code>, <code class="user-output">png</code>, <code class="user-output">svg</code>, or <code class="user-output">gif</code>.
    </div>
    <div class="form-group">
      <div class="custom-file">
        <input type="hidden" name="__action" value="upload_thumbnail">
        <input type="hidden" name="__csrf_token" value="<%= __csrf_token %>">
        <label for="uploadThumbnailInput">Thumbnail:</label>
        <input type="file" name="file" class="custom-file-input" id="uploadThumbnailInput" required>
        <label class="custom-file-label" for="uploadThumbnailInput">Choose file</label>
        <div class="invalid-feedback">
          Please choose a file
        </div>
        <small id="emailHelp" class="form-text text-muted">Max file size: <%= config.fileUploadMaxBytesFormatted %></small>
      </div>
    </div>
    <div class="form-group">
        <label for="changeLocation">Location:</label>
        <select class="custom-select" name="location" id="changeLocation">
            <option value="question">question</option>
            <option value="clientFilesCourse">clientFilesCourse</option>
        </select>
        <div class="invalid-feedback" id="invalidIdMessage">
        </div>
        <div class="text-right">
            <button type="button" class="btn btn-secondary" onclick="$('#<%= buttonID %>').popover('hide')">Cancel</button>
            <button type="submit" class="btn btn-primary">Upload</button>
        </div>
    </div>
</form>

<script>
  $(function() {
      // make the file inputs display the file name
      $(document).on('change', '.custom-file-input', function () {
        let fileName = $(this).val().replace(/\\/g, '/').replace(/.*\//, '');
        $(this).parent('.custom-file').find('.custom-file-label').text(fileName);
      });

      $('form[name="upload-thumbnail-form"]').submit(function(event) {
        if ($(this).get(0).checkValidity() === false) {
            event.preventDefault();
            event.stopPropagation();
        }
        $(this).addClass('was-validated');
      });
  });
</script>
