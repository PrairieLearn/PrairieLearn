<div class="form-group js-manual-grading-points">
  <span class="w-100">
    <label for="js-<%= type %>-score-value-input">
      <%= type_label %> Points:
    </label>
    <span class="float-right js-<%= type %>-score-value-info">
      <% if (rubric?.rubric_data || type == 'auto') { %>
      <%= points %> / <%= max_points %>
      <% if (authz_data.has_course_instance_permission_edit && !rubric?.rubric_data) { %>
      <span class="js-enable-<%= type %>-score-edit"><i class="fas fa-pencil"></i></span>
      <% } %>
      <% } %>
      <button type="button" class="btn btn-outline-secondary"
              onclick="$('#rubric-settings-modal-<%= type %>').modal('show');">
        <i class="fas fa-list-check"></i>
      </button>
    </span>
  </span>
  <div class="input-group js-<%= type %>-score-value-input<% if (rubric?.rubric_data || type == 'auto') { %> d-none<% } %>" id="js-<%= type %>-score-value-input">
    <input type="number" step="any"
           class="form-control js-grading-score-input"
           name="score_<%= type %>_points"
           value="<%= points %>"
           <% if (locals.disable || !authz_data.has_course_instance_permission_edit) { %>disabled<% } %> />
    <span class="input-group-append">
      <span class="input-group-text">/ <%= max_points %></span>
      <% if (!locals.disable && authz_data.has_course_instance_permission_edit && course.manual_grading_visible) { %>
      <button type="button" class="btn btn-outline-secondary"
              onclick="$('#rubric-settings-modal-<%= type %>').modal('show');">
        <i class="fas fa-list-check"></i>
      </button>
      <% } %>
    </span>
  </div>
</div>
<div class="form-group js-manual-grading-percentage">
  <label class="w-100">
    <%= type_label %> Score:
    <% if (rubric?.rubric_data || type == 'auto') { %>
    <span class="float-right js-<%= type %>-score-value-info">
      <%= points * 100 / (max_points || assessment_question.max_points) %>%
      <% if (authz_data.has_course_instance_permission_edit && !rubric?.rubric_data) { %>
      <span class="js-enable-<%= type %>-score-edit"><i class="fas fa-pencil"></i></span>
      <% } %>
      <button type="button" class="btn btn-outline-secondary"
              onclick="$('#rubric-settings-modal-<%= type %>').modal('show');">
        <i class="fas fa-list-check"></i>
      </button>
    </span>
    <% } %>
  </label>
  <div class="input-group js-<%= type %>-score-value-input<% if (rubric?.rubric_data || type == 'auto') { %> d-none<% } %>">
    <input type="number" step="any"
           class="form-control js-grading-score-input"
           name="score_<%= type %>_percent"
           value="<%= points * 100 / (max_points || assessment_question.max_points) %>"
           <% if (locals.disable || !authz_data.has_course_instance_permission_edit) { %>disabled<% } %> />
    <span class="input-group-append">
      <span class="input-group-text">%</span>
      <% if (!locals.disable && authz_data.has_course_instance_permission_edit && course.manual_grading_visible) { %>
      <button type="button" class="btn btn-outline-secondary"
              onclick="$('#rubric-settings-modal-<%= type %>').modal('show');">
        <i class="fas fa-list-check"></i>
      </button>
      <% } %>
    </span>
  </div>
</div>
<% if (rubric?.rubric_data) { %>
<% (rubric?.rubric_items || []).forEach((item) => { %>
<div>
  <span class="btn-group align-top">
    <span class="btn-group-toggle" data-toggle="buttons">
      <label class="btn btn-sm btn-outline-info text-truncate <%= item.grading_item ? 'active' : '' %>"
             title="<%= item.rubric_item.key_binding %>"
             style="width: 30px">
        <input type="checkbox" name="rubric_item_selected_<%= type %>"
               class="js-selectable-rubric-item" id="js-selectable-rubric-item-<%= item.rubric_item.id %>"
               value="<%= item.rubric_item.id %>" <%= item.grading_item ? 'checked' : '' %>
               data-key-binding="<%= item.rubric_item.key_binding %>">
        <%= item.rubric_item.key_binding || '\xa0' %>
      </label>
    </span>
  </span>
  <label class="d-inline-block" for="js-selectable-rubric-item-<%= item.rubric_item.id %>">
    <strong>
      <span class="js-manual-grading-points">[<%= item.rubric_item.points %>]</span>
      <span class="js-manual-grading-percentage">[<%= item.rubric_item.points * 100 / (max_points || assessment_question.max_points) %>%]</span>
    </strong>
    <%= item.rubric_item.short_text_rendered %>
    <div class="small text-muted">
      <%= item.rubric_item.staff_instructions_rendered %>
    </div>
  </label>
</div>
<% }); %>
<hr/>
<% } %>
