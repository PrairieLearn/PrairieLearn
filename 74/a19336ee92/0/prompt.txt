investigate https://github.com/PrairieLearn/PrairieLearn/issues/5498. 

> We should check that this has a reasonable UI flow and also that it works correctly with singleVariant questions.

Do this too.

---

why would i need to consider the previous values in a variant? e.g. "AND v.broken_at IS NULL " / "broken = v.broken OR ..."

---

if it was already broken with a date, isn't this going to update the date?

---

can you add a test for this change

---

put these sql queries in the variant model functions, and follow the style there (e.g. snake case params)

---

[Request interrupted by user]

---

Continue from where you left off.