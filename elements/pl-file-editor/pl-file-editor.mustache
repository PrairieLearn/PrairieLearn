{{#question}}
<script>
$(function() {
    var UUID = "{{uuid}}";

    new window.PLFileEditor(UUID, {
        originalContents: "{{original_file_contents}}",
        currentContents: "{{current_file_contents}}",
        readOnly: {{read_only}},
        aceMode: {{#ace_mode}}"{{ace_mode}}"{{/ace_mode}}{{^ace_mode}}undefined{{/ace_mode}},
        aceTheme: {{#ace_theme}}"{{ace_theme}}"{{/ace_theme}}{{^ace_theme}}undefined{{/ace_theme}},
        fontSize: {{#font_size}}"{{font_size}}"{{/font_size}}{{^font_size}}undefined{{/font_size}},
        minLines: {{#min_lines}}{{min_lines}}{{/min_lines}}{{^min_lines}}undefined{{/min_lines}},
        maxLines: {{#max_lines}}{{max_lines}}{{/max_lines}}{{^max_lines}}undefined{{/max_lines}},
        autoResize: {{auto_resize}},
        preview: {{#preview}}"{{preview}}"{{/preview}}{{^preview}}undefined{{/preview}},
        plOptionFocus: {{focus}}
    });
});
</script>
<div id="file-editor-{{uuid}}" class="mathjax_ignore">
    <input type="hidden" name="{{name}}">
    <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
             {{file_name}}
             <button type="button" class="btn btn-sm btn-secondary settings-button" tabindex="-1">
                 <div class="fa fa-cog"></div>
             </button>
         </div>
        <div class="editor"></div>
        <div class="modal fade" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Editor Settings</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    </div>
                    <div class="modal-body">
                        <table role="presentation">
                            <tr>
                                <td>Themes</td>
                                <td>
                                    <select id="theme">
                                        <optgroup label="Bright">
                                            <option value="ace/theme/chrome">Chrome</option>
                                            <option value="ace/theme/clouds">Clouds</option>
                                            <option value="ace/theme/crimson_editor">Crimson Editor</option>
                                            <option value="ace/theme/dawn">Dawn</option>
                                            <option value="ace/theme/dreamweaver">Dreamweaver</option>
                                            <option value="ace/theme/eclipse">Eclipse</option>
                                            <option value="ace/theme/github">GitHub</option>
                                            <option value="ace/theme/iplastic">IPlastic</option>
                                            <option value="ace/theme/solarized_light">Solarized Light</option>
                                            <option value="ace/theme/textmate">TextMate</option>
                                            <option value="ace/theme/tomorrow">Tomorrow</option>
                                            <option value="ace/theme/xcode">XCode</option>
                                            <option value="ace/theme/kuroir">Kuroir</option>
                                            <option value="ace/theme/katzenmilch">KatzenMilch</option>
                                            <option value="ace/theme/sqlserver">SQL Server</option>
                                        </optgroup>
                                        <optgroup label="Dark">
                                            <option value="ace/theme/ambiance">Ambiance</option>
                                            <option value="ace/theme/chaos">Chaos</option>
                                            <option value="ace/theme/clouds_midnight">Clouds Midnight</option>
                                            <option value="ace/theme/dracula">Dracula</option>
                                            <option value="ace/theme/cobalt">Cobalt</option>
                                            <option value="ace/theme/gruvbox">Gruvbox</option>
                                            <option value="ace/theme/gob">Green on Black</option>
                                            <option value="ace/theme/idle_fingers">idle Fingers</option>
                                            <option value="ace/theme/kr_theme">krTheme</option>
                                            <option value="ace/theme/merbivore">Merbivore</option>
                                            <option value="ace/theme/merbivore_soft">Merbivore Soft</option>
                                            <option value="ace/theme/mono_industrial">Mono Industrial</option>
                                            <option value="ace/theme/monokai">Monokai</option>
                                            <option value="ace/theme/nord_dark">Nord Dark</option>
                                            <option value="ace/theme/one_dark">One Dark</option>
                                            <option value="ace/theme/pastel_on_dark">Pastel on dark</option>
                                            <option value="ace/theme/solarized_dark">Solarized Dark</option>
                                            <option value="ace/theme/terminal">Terminal</option>
                                            <option value="ace/theme/tomorrow_night">Tomorrow Night</option>
                                            <option value="ace/theme/tomorrow_night_blue">Tomorrow Night Blue</option>
                                            <option value="ace/theme/tomorrow_night_bright">Tomorrow Night Bright</option>
                                            <option value="ace/theme/tomorrow_night_eighties">Tomorrow Night 80s</option>
                                            <option value="ace/theme/twilight">Twilight</option>
                                            <option value="ace/theme/vibrant_ink">Vibrant Ink</option>
                                        </optgroup>
                                    </select>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary save-settings-button">Save changes</button>
                    </div>
                </div>
            </div>
        </div>
        {{#preview}}
            <div class="card-footer">Preview</div>
            <div class="preview p-2 mathjax_process"></div>
        {{/preview}}
        <div class="card-footer d-flex">
            <div class="ml-auto">
                <button type="button" class="btn btn-outline-secondary btn-sm restore-original" tabindex="-1" type="button">Restore original file</button>
                <div class="restore-original-confirm-container" style="display: none;">
                    <button type="button" class="btn btn-success btn-sm restore-original-confirm" tabindex="-1">Confirm restore original</button>
                    <button type="button" class="btn btn-secondary btn-sm restore-original-cancel" tabindex="-1">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    {{submission}}
</div>
{{/question}}
