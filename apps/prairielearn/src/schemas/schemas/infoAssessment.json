{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Assessment info",
  "description": "Configuration data for an assessment.",
  "type": "object",
  "additionalProperties": false,
  "required": ["uuid", "type", "title", "set", "number"],
  "properties": {
    "comment": {
      "description": "Arbitrary comment for reference purposes.",
      "$ref": "#/definitions/CommentJsonSchema"
    },
    "uuid": {
      "description": "Unique identifier (UUID v4).",
      "type": "string",
      "pattern": "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"
    },
    "type": {
      "description": "Type of the assessment.",
      "type": "string",
      "enum": ["Homework", "Exam"]
    },
    "title": {
      "description": "The title of the assessment (e.g., 'Derivatives and anti-derivatives').",
      "type": "string"
    },
    "set": {
      "description": "Which assessmentSet this one belongs to (e.g., 'Homework', 'Practice Quiz').",
      "type": "string"
    },
    "number": {
      "description": "The number of this assessment within the set (e.g., '1', '2R', '3B').",
      "type": "string"
    },
    "allowIssueReporting": {
      "description": "Whether to allow students to report issues for assessment questions",
      "type": "boolean",
      "default": true
    },
    "multipleInstance": {
      "description": "Whether to allow students to create additional instances of the assessment",
      "type": "boolean",
      "default": false
    },
    "shuffleQuestions": {
      "description": "Whether the questions will be shuffled in the student view of an assessment. If the assessment type is Exam, this is true by default, and otherwise false.",
      "type": "boolean"
    },
    "allowAccess": {
      "description": "List of access rules for the assessment. Access is permitted if any access rule is satisfied.",
      "type": "array",
      "items": {
        "$ref": "#/definitions/AssessmentAccessRuleJsonSchema"
      },
      "default": []
    },
    "text": {
      "description": "HTML text shown on the assessment overview page.",
      "type": "string"
    },
    "maxPoints": {
      "description": "The number of points that must be earned in this assessment to achieve a score of 100%.",
      "type": "number"
    },
    "maxBonusPoints": {
      "description": "The maximum number of additional points that can be earned beyond maxPoints.",
      "type": "number"
    },
    "allowPersonalNotes": {
      "description": "Whether students are allowed to upload personal notes for this assessment.",
      "type": "boolean",
      "default": true
    },
    "autoClose": {
      "description": "Whether to automatically close the assessment after a period of inactivity.",
      "type": "boolean",
      "default": true
    },
    "zones": {
      "description": "Array of \"zones\" in the assessment, each containing questions that can be randomized within the zone.",
      "type": "array",
      "items": {
        "$ref": "#/definitions/ZoneAssessmentJsonSchema"
      },
      "default": []
    },
    "constantQuestionValue": {
      "description": "Whether to keep the value of a question constant after a student solves it correctly.",
      "type": "boolean",
      "default": false
    },
    "allowRealTimeGrading": {
      "description": "Removes the student \"Grade\" buttons to prevent real-time grading while the assessment is being taken. Real-time grading is allowed by default.",
      "type": "boolean"
    },
    "requireHonorCode": {
      "description": "Requires the student to accept an honor code before starting the assessment. Set to true for Exam assessments by default. Only configurable for Exam assessments.",
      "type": "boolean"
    },
    "honorCode": {
      "description": "Custom text for the honor code to be accepted before starting the assessment. Only available for Exam assessments.",
      "type": "string"
    },
    "groupWork": {
      "description": "Whether the assessment will support group work. DEPRECATED -- prefer using the \"groups\" property instead.",
      "type": "boolean",
      "default": false,
      "deprecated": true
    },
    "groupMaxSize": {
      "description": "Maximum number of students in a group. DEPRECATED -- prefer using the \"groups\" property instead.",
      "type": "number",
      "deprecated": true
    },
    "groupMinSize": {
      "description": "Minimum number of students in a group. DEPRECATED -- prefer using the \"groups\" property instead.",
      "type": "number",
      "deprecated": true
    },
    "groupRoles": {
      "description": "Array of custom user roles in a group. DEPRECATED -- prefer using the \"groups\" property instead.",
      "type": "array",
      "items": {
        "$ref": "#/definitions/LegacyGroupRoleJsonSchema"
      },
      "default": [],
      "deprecated": true
    },
    "canSubmit": {
      "description": "A list of group role names that can submit questions. Only applicable for group assessments. DEPRECATED -- prefer using the \"groups\" property instead.",
      "type": "array",
      "items": {
        "type": "string"
      },
      "uniqueItems": true,
      "default": [],
      "deprecated": true
    },
    "canView": {
      "description": "A list of group role names that can view questions. Only applicable for group assessments. DEPRECATED -- prefer using the \"groups\" property instead.",
      "type": "array",
      "items": {
        "type": "string"
      },
      "uniqueItems": true,
      "default": [],
      "deprecated": true
    },
    "studentGroupCreate": {
      "description": "Whether students can create groups. DEPRECATED -- prefer using the \"groups\" property instead.",
      "type": "boolean",
      "default": false,
      "deprecated": true
    },
    "studentGroupChooseName": {
      "description": "Whether students can choose a group name when creating a group. Only applicable if studentGroupCreate is true. DEPRECATED -- prefer using the \"groups\" property instead.",
      "type": "boolean",
      "default": true,
      "deprecated": true
    },
    "studentGroupJoin": {
      "description": "Whether students can join groups. DEPRECATED -- prefer using the \"groups\" property instead.",
      "type": "boolean",
      "default": false,
      "deprecated": true
    },
    "studentGroupLeave": {
      "description": "Whether students can leave groups. DEPRECATED -- prefer using the \"groups\" property instead.",
      "type": "boolean",
      "default": false,
      "deprecated": true
    },
    "groups": {
      "description": "Configuration for group-based assessments.",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "enabled": {
          "description": "Whether groups are enabled for this assessment.",
          "type": "boolean",
          "default": true
        },
        "minMembers": {
          "description": "Minimum number of students in a group.",
          "type": "number"
        },
        "maxMembers": {
          "description": "Maximum number of students in a group.",
          "type": "number"
        },
        "roles": {
          "description": "Array of custom user roles in a group.",
          "type": "array",
          "items": {
            "$ref": "#/definitions/GroupsRoleJsonSchema"
          },
          "uniqueItems": true,
          "default": []
        },
        "studentPermissions": {
          "description": "Student permissions for group management.",
          "type": "object",
          "properties": {
            "canCreateGroup": {
              "description": "Whether students can create groups.",
              "type": "boolean",
              "default": false
            },
            "canJoinGroup": {
              "description": "Whether students can join groups.",
              "type": "boolean",
              "default": false
            },
            "canLeaveGroup": {
              "description": "Whether students can leave groups.",
              "type": "boolean",
              "default": false
            },
            "canNameGroup": {
              "description": "Whether students can choose a group name when creating a group.",
              "type": "boolean",
              "default": true
            }
          },
          "default": {}
        },
        "rolePermissions": {
          "description": "Role-based permissions for group assessments.",
          "type": "object",
          "properties": {
            "canAssignRoles": {
              "description": "Role names that can assign other users to roles.",
              "type": "array",
              "items": {
                "type": "string"
              },
              "default": []
            },
            "canView": {
              "description": "Role names that can view questions.",
              "type": "array",
              "items": {
                "type": "string"
              },
              "default": []
            },
            "canSubmit": {
              "description": "Role names that can submit questions.",
              "type": "array",
              "items": {
                "type": "string"
              },
              "default": []
            }
          },
          "default": {}
        }
      }
    },
    "advanceScorePerc": {
      "description": "Minimum score percentage to unlock access to subsequent questions.",
      "$ref": "#/definitions/AdvanceScorePercJsonSchema"
    },
    "gradeRateMinutes": {
      "description": "Minimum amount of time (in minutes) between graded submissions to the same question.",
      "type": "number",
      "minimum": 0
    },
    "module": {
      "description": "Module that this assessment belongs to, as defined in infoCourse.json.",
      "type": "string"
    },
    "shareSourcePublicly": {
      "description": "If true, the assessment's JSON configuration and question list are available for others to view and copy.",
      "type": "boolean",
      "default": false
    }
  },
  "definitions": {
    "AssessmentAccessRuleJsonSchema": {
      "description": "An access rule that permits people to access this assessment. All restrictions in the rule must be satisfied for the rule to allow access.",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "comment": {
          "description": "Arbitrary comment for reference purposes.",
          "$ref": "#/definitions/CommentJsonSchema"
        },
        "mode": {
          "description": "The server mode required for access.",
          "type": "string",
          "enum": ["Public", "Exam"]
        },
        "examUuid": {
          "description": "The PrairieTest exam UUID for which a student must be registered. Implies mode: Exam.",
          "type": "string",
          "pattern": "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"
        },
        "role": {
          "description": "DEPRECATED -- do not use.",
          "type": "string",
          "enum": ["Student", "TA", "Instructor"],
          "deprecated": true
        },
        "uids": {
          "description": "A list of UIDs (like 'username@example.com'), one of which is required for access.",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "credit": {
          "description": "How much credit is awarded for doing the homework, as a percentage (100 means full credit).",
          "type": "integer",
          "minimum": 0
        },
        "startDate": {
          "description": "The earliest date on which access is permitted.",
          "type": "string"
        },
        "endDate": {
          "description": "The latest date on which access is permitted.",
          "type": "string"
        },
        "timeLimitMin": {
          "description": "The time limit to complete the assessment, in minutes (only for Exams).",
          "type": "integer",
          "minimum": 0
        },
        "password": {
          "description": "Password to begin the assessment (only for Exams).",
          "type": "string"
        },
        "showClosedAssessment": {
          "description": "Whether the student can view the assessment after it has been closed",
          "type": "boolean",
          "default": true
        },
        "showClosedAssessmentScore": {
          "description": "Whether the student can view the assessment grade after it has been closed. Only works if showClosedAssessment is also set to false",
          "type": "boolean",
          "default": true
        },
        "active": {
          "description": "Whether the student can create a new assessment instance and submit answers to questions. If set to false, the available credit must be 0.",
          "type": "boolean",
          "default": true
        }
      }
    },
    "ZoneAssessmentJsonSchema": {
      "type": "object",
      "required": ["questions"],
      "properties": {
        "comment": {
          "description": "Arbitrary comment for reference purposes.",
          "$ref": "#/definitions/CommentJsonSchema"
        },
        "title": {
          "description": "Zone title, displayed to the students at the top of the question list for the zone.",
          "type": "string"
        },
        "comments": {
          "description": "DEPRECATED -- do not use.",
          "$ref": "#/definitions/CommentJsonSchema",
          "deprecated": true
        },
        "maxPoints": {
          "description": "Only this many of the points that are awarded for answering questions in this zone will count toward the total points.",
          "type": "number"
        },
        "numberChoose": {
          "description": "Number of questions to choose from this zone.",
          "type": "integer",
          "minimum": 0
        },
        "bestQuestions": {
          "description": "Only this many of the questions in this zone, with the highest number of awarded points, will count toward the total points.",
          "type": "integer",
          "minimum": 0
        },
        "lockpoint": {
          "description": "If true, students must explicitly acknowledge advancing past this point. All questions in previous zones become read-only after crossing.",
          "type": "boolean",
          "default": false
        },
        "questions": {
          "description": "Array of questions in the zone.",
          "type": "array",
          "items": {
            "$ref": "#/definitions/ZoneQuestionBlockJsonSchema"
          },
          "minItems": 1
        },
        "advanceScorePerc": {
          "description": "Minimum score percentage to unlock access to subsequent questions.",
          "$ref": "#/definitions/AdvanceScorePercJsonSchema"
        },
        "gradeRateMinutes": {
          "description": "Minimum amount of time (in minutes) between graded submissions to the same question.",
          "type": "number",
          "minimum": 0
        },
        "allowRealTimeGrading": {
          "description": "Whether to allow real-time grading for questions in this zone. If not specified, inherits from the assessment level.",
          "type": "boolean"
        },
        "canSubmit": {
          "description": "A list of group role names that can submit questions in this zone. Only applicable for group assessments.",
          "type": "array",
          "items": {
            "type": "string"
          },
          "uniqueItems": true,
          "default": []
        },
        "canView": {
          "description": "A list of group role names that can view questions in this zone. Only applicable for group assessments.",
          "type": "array",
          "items": {
            "type": "string"
          },
          "uniqueItems": true,
          "default": []
        }
      }
    },
    "ZoneQuestionBlockJsonSchema": {
      "type": "object",
      "properties": {
        "comment": {
          "description": "Arbitrary comment for reference purposes.",
          "$ref": "#/definitions/CommentJsonSchema"
        },
        "points": {
          "$ref": "#/definitions/PointsJsonSchema"
        },
        "autoPoints": {
          "$ref": "#/definitions/PointsJsonSchema"
        },
        "maxPoints": {
          "description": "A single point value.",
          "$ref": "#/definitions/PointsSingleJsonSchema"
        },
        "maxAutoPoints": {
          "description": "A single point value.",
          "$ref": "#/definitions/PointsSingleJsonSchema"
        },
        "manualPoints": {
          "description": "A single point value.",
          "$ref": "#/definitions/PointsSingleJsonSchema"
        },
        "id": {
          "description": "Question ID (directory name of the question).",
          "$ref": "#/definitions/QuestionIdJsonSchema"
        },
        "forceMaxPoints": {
          "description": "Whether to force this question to be awarded maximum points on a regrade.",
          "$ref": "#/definitions/ForceMaxPointsJsonSchema"
        },
        "alternatives": {
          "description": "Array of question alternatives to choose from.",
          "type": "array",
          "items": {
            "$ref": "#/definitions/QuestionAlternativeJsonSchema"
          },
          "minItems": 1
        },
        "numberChoose": {
          "description": "Number of questions to choose from this group.",
          "type": "integer",
          "minimum": 0
        },
        "triesPerVariant": {
          "description": "The maximum number of graded submissions allowed for each question instance.",
          "type": "integer",
          "minimum": 1
        },
        "advanceScorePerc": {
          "description": "Minimum score percentage to unlock access to subsequent questions.",
          "$ref": "#/definitions/AdvanceScorePercJsonSchema"
        },
        "gradeRateMinutes": {
          "description": "Minimum amount of time (in minutes) between graded submissions to the same question.",
          "type": "number",
          "minimum": 0
        },
        "allowRealTimeGrading": {
          "description": "Whether to allow real-time grading for this question. If not specified, inherits from the zone level.",
          "type": "boolean"
        },
        "canSubmit": {
          "description": "A list of group role names that can submit the question. Only applicable for group assessments.",
          "type": "array",
          "items": {
            "type": "string"
          },
          "uniqueItems": true,
          "default": []
        },
        "canView": {
          "description": "A list of group role names that can view the question. Only applicable for group assessments.",
          "type": "array",
          "items": {
            "type": "string"
          },
          "uniqueItems": true,
          "default": []
        }
      }
    },
    "QuestionAlternativeJsonSchema": {
      "type": "object",
      "required": ["id"],
      "properties": {
        "comment": {
          "description": "Arbitrary comment for reference purposes.",
          "$ref": "#/definitions/CommentJsonSchema"
        },
        "points": {
          "$ref": "#/definitions/PointsJsonSchema"
        },
        "autoPoints": {
          "$ref": "#/definitions/PointsJsonSchema"
        },
        "maxPoints": {
          "description": "A single point value.",
          "$ref": "#/definitions/PointsSingleJsonSchema"
        },
        "maxAutoPoints": {
          "description": "A single point value.",
          "$ref": "#/definitions/PointsSingleJsonSchema"
        },
        "manualPoints": {
          "description": "A single point value.",
          "$ref": "#/definitions/PointsSingleJsonSchema"
        },
        "id": {
          "$ref": "#/definitions/QuestionIdJsonSchema"
        },
        "forceMaxPoints": {
          "description": "Whether to force this question to be awarded maximum points on a regrade.",
          "$ref": "#/definitions/ForceMaxPointsJsonSchema"
        },
        "triesPerVariant": {
          "description": "The maximum number of graded submissions allowed for each question instance.",
          "type": "integer",
          "minimum": 1
        },
        "advanceScorePerc": {
          "description": "Minimum score percentage to unlock access to subsequent questions.",
          "$ref": "#/definitions/AdvanceScorePercJsonSchema"
        },
        "gradeRateMinutes": {
          "description": "Minimum amount of time (in minutes) between graded submissions to the same question.",
          "type": "number",
          "minimum": 0
        },
        "allowRealTimeGrading": {
          "description": "Whether to allow real-time grading for this question alternative. If not specified, inherits from the question level.",
          "type": "boolean"
        }
      }
    },
    "PointsJsonSchema": {
      "anyOf": [
        {
          "$ref": "#/definitions/PointsSingleJsonSchema"
        },
        {
          "$ref": "#/definitions/PointsListJsonSchema"
        }
      ]
    },
    "PointsSingleJsonSchema": {
      "description": "A single point value.",
      "type": "number",
      "minimum": 0,
      "default": 0
    },
    "PointsListJsonSchema": {
      "description": "An array of point values.",
      "type": "array",
      "items": {
        "$ref": "#/definitions/PointsSingleJsonSchema"
      },
      "minItems": 1
    },
    "QuestionIdJsonSchema": {
      "description": "Question ID (directory name of the question).",
      "type": "string"
    },
    "ForceMaxPointsJsonSchema": {
      "description": "Whether to force this question to be awarded maximum points on a regrade.",
      "type": "boolean"
    },
    "AdvanceScorePercJsonSchema": {
      "description": "Minimum score percentage to unlock access to subsequent questions.",
      "type": "number",
      "minimum": 0,
      "maximum": 100
    },
    "LegacyGroupRoleJsonSchema": {
      "description": "A custom role for use in group assessments that allows control over certain permissions.",
      "type": "object",
      "required": ["name"],
      "properties": {
        "name": {
          "description": "The group role's name (i.e. Manager, Reflector, Recorder).",
          "type": "string"
        },
        "minimum": {
          "description": "The minimum number of users that should be in this role in a group.",
          "type": "number",
          "default": 0
        },
        "maximum": {
          "description": "The maximum number of users that should be in this role in a group.",
          "type": "number"
        },
        "canAssignRoles": {
          "description": "Whether users with this role can assign other users' group roles.",
          "type": "boolean",
          "default": false
        }
      }
    },
    "GroupsRoleJsonSchema": {
      "description": "A custom role for use in group assessments.",
      "type": "object",
      "required": ["name"],
      "properties": {
        "name": {
          "description": "The group role's name (e.g., Manager, Recorder).",
          "type": "string"
        },
        "minMembers": {
          "description": "The minimum number of users that should be in this role.",
          "type": "number",
          "default": 0
        },
        "maxMembers": {
          "description": "The maximum number of users that should be in this role.",
          "type": "number"
        }
      }
    },
    "CommentJsonSchema": {
      "description": "Arbitrary comment for reference purposes.",
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "array"
        },
        {
          "type": "object",
          "additionalProperties": {},
          "properties": {}
        }
      ]
    }
  }
}
